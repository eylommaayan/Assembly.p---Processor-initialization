מטרת הקוד היא **לאתחל את מעבד 6502** ולהכין את הזיכרון והמערכת להפעלת תוכנית. זהו **קוד אתחול טיפוסי** שנטען בעת הפעלת מערכת מבוססת 6502 (כמו Atari, Commodore, NES ועוד).

הנה הסבר בשלבים:

---

## 🎯 **מטרה כללית של הקוד**

> לאתחל את המעבד, לאפס את הזיכרון בדף הראשון (Page Zero), להגדיר את המחסנית, ולהגדיר את נקודת האתחול של המעבד (Reset Vector).

---

## 🧱 שלבי הפעולה בקוד

### 🔹 שלב 1: התחלה והכנות

```asm
processor 6502
seg code
org $F000
```

* מגדיר את סוג המעבד כ־6502.
* מסמן את תחום הקוד (code segment).
* מורה למקודד להתחיל את כתיבת הקוד מכתובת `$F000` בזיכרון (תחילת ה-ROM, המקום שממנו הקוד יתחיל להתבצע).

---

### 🔹 שלב 2: אתחול ראשוני של המעבד

```asm
Start:
  sei     ; השבתת פסיקות
  cld     ; ביטול מצב עשרוני
  ldx #$FF
  txs     ; הגדרת המחסנית להתחיל ב־$01FF
```

* `SEI` – מכבה פסיקות (כדי שהמערכת לא תופרע בזמן האתחול).
* `CLD` – מכבה מצב עשרוני, עוברים לחישובים בבינארי בלבד.
* `LDX #$FF` – טוען את `X` בערך 255.
* `TXS` – מגדיר את המחסנית להתחיל מ־\$01FF (גבול עליון של ה־Stack).

---

### 🔹 שלב 3: ניקוי הזיכרון בדף הראשון (Page Zero)

```asm
  lda #0      ; טוען 0 ל־A
  ldx #$FF    ; טוען FF ל־X

MemLoop:
  sta $0,X    ; שומר אפס בזיכרון: $00FF, $00FE, ... עד $0000
  dex         ; מקטין את X
  bne MemLoop ; חזור אם X ≠ 0
```

* **מנקה את כל הזיכרון בכתובות `$0000 - $00FF`** (זיכרון חשוב שנמצא בדף הראשון).
* `A` מכיל 0, ואנחנו רושמים אותו בכל כתובת מהסוף להתחלה.

---

### 🔹 שלב 4: הגדרת כתובת האתחול – Reset Vector

```asm
org $FFFC
.word Start
.word Start
```

* `org $FFFC` – עוברים לסוף זיכרון ה־ROM (שם המעבד מצפה למצוא את ה־Reset Vector).
* `.word Start` – מגדיר שהמעבד, כשהוא נדלק, יתחיל להריץ את הקוד מהתווית `Start`.
* השני `.word Start` הוא וקטור לפסיקה שלא משתמשים בה כרגע, אבל חובה למלא.

---

## ✅ לסיכום

זהו **קוד Boot בסיסי** עבור כל מערכת המבוססת על 6502.
הוא:

1. **מאפס את המעבד** (פסיקות, מצב עשרוני, מחסנית).
2. **מאפס את הזיכרון** בדף הראשון.
3. **מגדיר את כתובת ההתחלה** לפעולה.

---

